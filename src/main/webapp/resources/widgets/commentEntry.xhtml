<ui:composition xmlns="http://www.w3.org/1999/xhtml"

	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pr="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:my="http://java.sun.com/jsf/composite/widgets" >
	<cc:interface>
		<cc:attribute name="value" required="true"/>
	</cc:interface>
	<cc:implementation>
		<div Class="comment">
				<div class="commentauthor">
					<h:outputLabel value="#{cc.attrs.value.creationTime} : #{cc.attrs.value.author.name}" align="right" style="font-size: x-small"/>
				</div>
				<div class="commenttext">
					<h:outputLabel value="#{cc.attrs.value.text}" />
				</div>
			<h:form>
				<h:panelGroup id="commentNew">
					<h:panelGroup rendered="#{newCommentBean.activ}">
					<h:form>
						<pr:inputTextarea rows="2" cols="30" counter="display" maxlength="100" 
						counterTemplate="{0} characters remaining." autoResize="true" value="#{newCommentBean.text}"/>
						<h:outputText id="display" />
						<h:commandButton ajax="true" value="add" action="#{newCommentBean.submit(cc.attrs.value)}"/>
					</h:form>
					</h:panelGroup>
					<h:panelGroup rendered="#{!newCommentBean.activ}">
						<h:commandLink>
							<h:outputText value="Antworten"/>
							<f:ajax render="@this commentNew" listener="#{newCommentBean.changeActiv}" />
						</h:commandLink>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
			<c:if test="#{cc.attrs.value.hasSubComments}">
					<div class="commentSub">
							<pr:dataGrid var="re" value="#{cc.attrs.value.subComments}" 
							columns="1" layout="grid" rows="7">
		        			      <my:commentEntry value="#{re}" />
		        				     	
			        		</pr:dataGrid>
					</div>
				</c:if>
			</div>
	</cc:implementation>
</ui:composition>