<ui:composition xmlns="http://www.w3.org/1999/xhtml"

	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pr="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:my="http://java.sun.com/jsf/composite/widgets" >
	<cc:interface componentType="commentEntry">
		<cc:attribute name="value" required="true"/>
	</cc:interface>
	<cc:implementation>
	<p>yolo</p>
		<div class="comment">
			<h:form>
				<h:panelGroup id="voteData">
					
						<div class="votebuttons"
							title="#{cc.comment.voteController.votesCount} Votes">
							<h:commandLink action="#{cc.comment.voteController.upVote}">
								<h:graphicImage
									styleClass='upvote #{cc.comment.voteController.hasCurrentUserUpvoted() ? "active" : ""}'
									value="resources/images/caret-top.svg" />
								<f:ajax render="@this voteData" />
							</h:commandLink>
							<span class="vote_sum">#{cc.comment.voteController.votesCount}</span>
							<h:commandLink action="#{cc.comment.voteController.downVote}">
								<h:graphicImage
									styleClass='downvote #{cc.comment.voteController.hasCurrentUserDownvoted() ? "active" : ""}'
									value="resources/images/caret-bottom.svg" />
								<f:ajax render="@this voteData" />
							</h:commandLink>
						</div>
					
				</h:panelGroup>
			</h:form>
			<div class="comment-wrapper">
				<p class="comment-author">
					#{cc.timeAgo} <em><a href="/link/to/author/">#{cc.comment.author.name}</a></em>
				</p>
				<p class="comment-text">#{cc.comment.text}</p>
			</div>
			
			
			<h:form>
					<h:panelGroup id="commentNew">
						<h:panelGroup rendered="#{cc.answerActiv}">
						
								<pr:inputTextarea rows="2" cols="30" counter="display" maxlength="100" 
								counterTemplate="{0} characters remaining." autoResize="true" value="#{cc.newText}"/>
								<h:outputText id="display" />
								<h:commandLink action="#{cc.addComment()}">
									<h:outputText value="add comment" />
								</h:commandLink>
							
						</h:panelGroup>
						<h:panelGroup rendered="#{!cc.answerActiv}">
							<h:commandLink>
								<h:outputText value="Antworten"/>
							 	<f:ajax render="@this commentNew" listener="#{cc.changeAnswerActiv()}" />
							</h:commandLink>
						</h:panelGroup>
					</h:panelGroup>
				</h:form>
			
			
			
			
			
		</div>
		
		
	</cc:implementation>
</ui:composition>